<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
        <!-- Cordova default code. Dont touch them -->
<!--
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/default.css">
-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style type="text/css">
            @import url("https://www.w3schools.com/w3css/4/w3.css");
            @import url("https://www.w3schools.com/lib/w3-theme-blue-grey.css");
            @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css");
            @import url("css/index.css");
        </style>
    </head>
    
    <body onload="main()" onresize="refreshTable(); setStyleIndex()" class="w3-text-theme">
        
        <div class="w3-bar w3-theme w3-xlarge">
            <a name="buttonSidebar" id="buttonSidebar" class="w3-bar-item w3-button" href="#"><i class="fa fa-bars"></i></a>
            <span class="w3-bar-item" name="title" id="title">Title</span>
            <a name="buttonMenu" id="buttonMenu" class="w3-bar-item w3-button w3-right" href="#"><i class="fa fa-ellipsis-v"></i></a>
            <div name="divToolbar" id="divToolbar" class="w3-right">
                <a name="buttonSync" id="buttonSync" class="w3-bar-item w3-button divToolbarNormal" href="javascript:DataRefresh(0)"><i class="fa fa-refresh"></i></a>
                <a name="buttonEdit" id="buttonEdit" class="w3-bar-item w3-button divToolbarSelection" href="javascript:onclickEditButton()"><i class="fa fa-edit"></i></a>
                <a name="buttonDelete" id="buttonDelete" class="w3-bar-item w3-button divToolbarSelection" href="javascript:removeHabit()"><i class="fa fa-trash"></i></a>
            </div>
        </div>
        
        <div id="tableMain" name="tableMain" class="w3-container">
        </div>
        
        <button name="buttonAdd" id="buttonAdd" class="w3-button w3-xlarge w3-circle w3-theme-action w3-card-4 w3-ripple" onclick="onclickAddButton()"><i class="fa fa-plus"></i></button>
        
        <div name="modalAddHabit" id="modalAddHabit" class="w3-modal">
            <div class="w3-modal-content w3-text-theme" style="max-width:600px">
                <div name="titleModalHabit" id="titleModalHabit" class="w3-container w3-theme w3-large w3-padding">Title</div>
                <form class="w3-container" onsubmit="addupdateHabit()">
                    <p>
                        <label class="w3-small">Target</label>
                        <select name="optionTarget" id="optionTarget" class="w3-select">
                            <option value="Improve" selected>I want to improve</option>
                            <option value="Reduce">I want to reduce</option>
                        </select>
                    </p>
                    <p>
                        <label class="w3-small">Name</label>
                        <input name="textHabit" id="textHabit" class="w3-input" type="text" required>
                    </p>
                    <p>
                        <div class="w3-bar">
                            <button type="reset" class="w3-button w3-theme w3-left" style="width:45%" onclick="document.getElementById('modalAddHabit').style.display='none'">Cancel</button>
                            <button type="submit" class="w3-button w3-theme w3-right" style="width:45%">Submit</button>
                        </div>
                    </p>
                </form>
            </div>
        </div>
        
        <div name="modalEditData" id="modalEditData" class="w3-modal">
            <div class="w3-modal-content w3-text-theme" style="max-width:600px">
                <div class="w3-container w3-theme w3-large w3-padding">Edit data</div>
                <form name="formEditData" id="formEditData" class="w3-container">
                    <p>
                        <label>Enter value</label>
                        <div name="divEditDataVal" id="divEditDataVal"></div>
                        <input name="textData" id="textData" class="w3-input" type="number" required>
                    </p>
                    <p>
                        <div class="w3-bar">
                            <button type="reset" class="w3-button w3-theme w3-left" style="width:45%" onclick="document.getElementById('modalEditData').style.display='none'">Cancel</button>
                            <button type="submit" class="w3-button w3-theme w3-right" style="width:45%">Submit</button>
                        </div>
                    </p>
                    <p>
                        <label>Date: </label>
                        <label class="labelDate" id="labelDate"></label>
                    </p>
                    <p>
                        <label>Habit: </label>
                        <label class="labelHabit" id="labelHabit"></label>
                    </p>
                </form>
            </div>
        </div>

        <div name="divDialog" id="divDialog" class="w3-modal w3-center">
            <span class="w3-modal-content w3-card-4 w3-theme">
                <i class="fa fa-spinner w3-spin w3-xxxlarge"></i>
            </span>
        </div>

        <script type="text/javascript" src="js/jquery/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="js/moment/moment.min.js"></script>
        <script type="text/javascript" src="js/config.js"></script>
        <script type="text/javascript" src="js/style.js"></script>
        <script type="text/javascript" src="js/libdata.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            function main()
            {
//                DataReset(1, 1, 0); return; /* 0=NA, 1=reset; ramData, localData, cloudData */
                //testcode();

                DataLoad();     /* data should be loaded from localstorage everytime a page is loaded. this ensures to refresh data if updated from another page */
                DataRefresh(0); /* see description about the function definition */
                setStyleIndex();
                
                setInterval(function () { DataRefresh(0); }, SYNC_INTERVAL_S * 1000);
            }
        </script>

        
        <!-- Cordova default code. Dont touch them -->
    <!--
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div>
    -->
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/default.js"></script>
    </body>
</html>
